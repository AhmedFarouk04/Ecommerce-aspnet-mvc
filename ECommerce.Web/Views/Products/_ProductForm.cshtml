@model ECommerce.Web.ViewModels.ProductFormViewModel

<div class="row">

    <div class="col-md-6 mb-3">
        <label asp-for="Name" class="form-label fw-bold"></label>
        <input asp-for="Name"
               class="form-control input-theme"
               placeholder="Enter product name" />
        <span asp-validation-for="Name" class="text-danger small"></span>
    </div>

    <div class="col-md-3 mb-3">
        <label asp-for="Price" class="form-label fw-bold"></label>
        <input asp-for="Price"
               class="form-control input-theme"
               step="0.01"
               placeholder="0.00" />
        <span asp-validation-for="Price" class="text-danger small"></span>
    </div>

    <div class="col-md-3 mb-3">
        <label asp-for="Stock" class="form-label fw-bold"></label>
        <input asp-for="Stock"
               class="form-control input-theme"
               placeholder="0" />
        <span asp-validation-for="Stock" class="text-danger small"></span>
    </div>

    <div class="col-md-6 mb-3">
        <label asp-for="CategoryId" class="form-label fw-bold"></label>
        <select asp-for="CategoryId"
                asp-items="Model.Categories"
                class="form-select input-theme">
            <option value="">-- Select Category --</option>
        </select>
        <span asp-validation-for="CategoryId" class="text-danger small"></span>
    </div>

    @if (!string.IsNullOrEmpty(Model.ExistingImageUrl))
    {
        <div class="col-md-6 mb-3">
            <label class="form-label fw-bold">Current Image</label>

            <div class="border rounded p-3 text-center bg-light">
                <img src="/images/products/@Model.ExistingImageUrl"
                     class="img-fluid rounded shadow-sm mb-2"
                     style="max-height: 200px;" />

                <div class="form-check mt-2">
                    <input asp-for="RemoveImage"
                           class="form-check-input"
                           type="checkbox"
                           id="removeImageCheck" />
                    <label class="form-check-label text-danger fw-semibold"
                           for="removeImageCheck">
                        Remove current image
                    </label>
                </div>
            </div>
        </div>
    }


    <div class="col-md-6 mb-3">
        <label asp-for="ImageFile" class="form-label fw-bold">
            Upload New Image <span class="text-muted small">(optional)</span>
        </label>

        <input asp-for="ImageFile"
               type="file"
               class="form-control input-theme"
               accept="image/*"
               onchange="previewImage(event)" />

        <span asp-validation-for="ImageFile" class="text-danger small"></span>
    </div>

    <div class="col-md-6 mb-4">
        <label class="form-label fw-bold">New Image Preview</label>

        <div class="border rounded p-3 text-center bg-light h-100 d-flex align-items-center justify-content-center">
            <img id="imgPreview"
                 class="img-fluid rounded shadow-sm d-none"
                 style="max-height: 220px;" />
        </div>
    </div>

</div>

<script>
    function previewImage(event) {
        const img = document.getElementById("imgPreview");
        const file = event.target.files[0];

        if (!file) {
            img.classList.add("d-none");
            img.src = "";
            return;
        }

        img.src = URL.createObjectURL(file);
        img.classList.remove("d-none");
    }
</script>
